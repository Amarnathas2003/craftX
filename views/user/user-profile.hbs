{{>new-user-header}}

<section style="background-color: #eee; position: relative;">
    <div class="container py-5">
        <div class="row">
            {{!-- {{>user-left-menue}} --}}
            <div>
                <div class="card mb-4 rounded border" id="details-container">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Full Name</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{userDetails.fullname}}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                                <p class="mb-0">Email</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{userDetails.email}}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="row">
                            <div class="col-sm-3">
                            <p class="mb-0">Phone Number</p>
                            </div>
                            <div class="col-sm-9">
                                <p class="text-muted mb-0">{{userDetails.phonenumber}}</p>
                            </div>
                        </div>
                        <hr>
                        <div class="d-flex justify-content-between">
                           <button class="btn border edit-profile"><a
                                href="/profile/update" class="update-btn">Update Details</a>
                        </button>
                        <button class="btn border"><a href="/profile/my-orders">My Orders</a></button>
                        <button class="btn border"><a href="/profile/manageaddress">Manage Address</a></button>
                        <a href="logout" class="btn border-secondary" style="color: red;">Log out</a>
                        </div>
                    </div>
                </div>
                <small class="text-bold">Refer and Earn RS.100!!</small>
                <div class="d-flex border rounded">
                    <small style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;"
                        class="mt-1">Referal Code: </small>
                    <input type="text" class="border" value="{{userDetails.referalCode}}" disabled
                        name="referalCode" id="">
                </div>
                <hr>

                <div class="card">
                    <div class="card-body">
                     <div class="d-flex justify-content-evenly">
                          <div>
                             <h5 class="card-title">Wallet</h5>
                          </div>
                           <div>
                             <a href="/profile/wallet-history" style="margin-left: 130px;">
                            History
                            </a>
                           </div>
                     </div>
                        <hr>
                        <p class="card-text text-center" style="font-size: 22px;">Current Balance</p>
                       <div class="d-flex justify-content-center">
                         <p style="color: green; font-size: 30px;">
                            RS.<strong>{{userDetails.wallet}}</strong></p>
                       </div>
                        <div class="d-flex justify-content-evenly gap-2">
                            <a href="/" class="btn btn-primary">Buy Products</a>
                            <a onclick="addMoney()" class="btn btn-primary">Add Money</a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</section>


<section style="position:absolute;" class="walletPayment">
    <div class="container" id="walletMoneyAdd">
        <div class="row">
            <div class="col-lg-4 mx-auto">
                <div class="card border border-dark">
                    <div class="card-header">
                        <div class="bg-white shadow-sm pt-4 pl-2 pr-2 pb-2">
                            <ul role="tablist" class="nav bg-light nav-pills rounded nav-fill mb-3">
                                <li class="nav-item">
                                <a data-toggle="pill" href="#credit-card" class="nav-link active"> 
                                <i class="fas fa-credit-card mr-2"></i>
                                Credit Card
                            </ul>
                        </div>
                        <div class="tab-content">
                            <div id="credit-card" class="tab-pane fade show active pt-3">
                                <form role="form" onsubmit="event.preventDefault()">
                                    <div class="form-group"> <label for="username">
                                        <h6>Card Owner</h6>
                                        </label> <input type="text" name="username" placeholder="Card Owner Name"
                                            required class="form-control "> </div>
                                    <div class="form-group"> <label for="cardNumber">
                                            <h6>Card number</h6>
                                        </label>
                                        <div class="input-group"> 
                                            <input type="text" name="cardNumber" placeholder="Valid card number" class="form-control" required>
                                            <div class="input-group-append"> 
                                                <span class="input-group-text text-muted">
                                                    <i class="fab fa-cc-visa mx-1"></i> 
                                                    <i class="fab fa-cc-mastercard mx-1"></i> 
                                                    <i class="fab fa-cc-amex mx-1"></i> 
                                                </span> 
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-8">
                                            <div class="form-group"> <label><span class="hidden-xs">
                                                        <h6>Expiration Date</h6>
                                                    </span></label>
                                                <div class="input-group"> <input type="number" placeholder="MM" name=""
                                                        class="form-control" required> <input type="number"
                                                        placeholder="YY" name="" class="form-control" required> </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group mb-4"> <label data-toggle="tooltip"
                                                    title="Three digit CV code on the back of your card">
                                                    <h6>CVV <i class="fa fa-question-circle d-inline"></i></h6>
                                                </label>
                                                <input type="text" required class="form-control">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="cardNumber">
                                            <h6>Enter the Amount</h6>
                                        </label>

                                        <div class="input-group mb-2">
                                            <input type="number" name="cardNumber" class="form-control"
                                                id="paymentAmount" required>
                                        </div>

                                    </div>
                                    <div class="card-footer">

                                        <a type="button" onclick="confirmPayment()"
                                            class="subscribe btn btn-primary btn-block shadow-sm">
                                            Confirm Payment
                                        </a>

                                        <a type="button" class="subscribe btn btn-block shadow-sm border border-dark"
                                            onclick="cancelAdd()" id="cancelBtn">
                                            Cancel
                                        </a>
                                </form>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</section>


{{>new-user-footer}}

<script>
    $(document).ready(function () {
        $('#walletMoneyAdd').hide();
        $(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
    });

    function confirmPayment() {
        const getAmount = document.getElementById('paymentAmount').value;
        const paymentAmount = getAmount;
        Swal.fire({
            title: "Add Money",
            text: "Are you sure you want to add the money to the wallet?",
            icon: "warning",
            showCancelButton: true,
            confirmButtonText: 'Yes, add it!',
            cancelButtonText: 'No, cancel',
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax({
                    url: "/profile/add-money/" + paymentAmount,
                    method: "GET",
                    success: (response) => {
                        if (response.message) {
                            Swal.fire({
                                title: "Money Added",
                                text: "Money Added to the Wallet Successfully",
                                icon: "success",
                            }).then(() => {
                                location.reload();
                            });
                        } else {
                            Swal.fire({
                                title: "Something Went Wrong",
                                text: "Something went wrong. Please try again later.",
                                icon: "error",
                            });
                        }
                    }
                })
            }
        });
    }

    function addMoney() {
        $('#walletMoneyAdd').show();
    }
    function cancelAdd() {
        $('#walletMoneyAdd').hide();
    }

</script>



<style>
    .icon-container {
        display: flex;
        justify-content: space-between;
    }

    .edit-details {
        text-decoration: none;
        font-weight: bold;
    }

    .update-btn {
        text-decoration: none;
    }

    body {
        background: #f5f5f5
    }

    .rounded {
        border-radius: 1rem
    }

    .nav-pills .nav-link {
        color: #555
    }

    .nav-pills .nav-link.active {
        color: white
    }

    input[type="radio"] {
        margin-right: 5px
    }

    .bold {
        font-weight: bold
    }

    .walletPayment {
        top: 400px;
        left: 100px;
        width: 1100px;
    }
</style>